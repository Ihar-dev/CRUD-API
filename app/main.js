(()=>{var e={371:(e,n,t)=>{t(738).config(Object.assign({},t(547),t(962)(process.argv)))},962:e=>{const n=/^dotenv_config_(encoding|path|debug|override)=(.+)$/;e.exports=function(e){return e.reduce((function(e,t){const r=t.match(n);return r&&(e[r[1]]=r[2]),e}),{})}},547:e=>{const n={};null!=process.env.DOTENV_CONFIG_ENCODING&&(n.encoding=process.env.DOTENV_CONFIG_ENCODING),null!=process.env.DOTENV_CONFIG_PATH&&(n.path=process.env.DOTENV_CONFIG_PATH),null!=process.env.DOTENV_CONFIG_DEBUG&&(n.debug=process.env.DOTENV_CONFIG_DEBUG),null!=process.env.DOTENV_CONFIG_OVERRIDE&&(n.override=process.env.DOTENV_CONFIG_OVERRIDE),e.exports=n},738:(e,n,t)=>{const r=t(147),s=t(17),o=t(37),i=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function c(e){console.log(`[dotenv][DEBUG] ${e}`)}const a={config:function(e){let n=s.resolve(process.cwd(),".env"),t="utf8";const i=Boolean(e&&e.debug),u=Boolean(e&&e.override);var d;e&&(null!=e.path&&(n="~"===(d=e.path)[0]?s.join(o.homedir(),d.slice(1)):d),null!=e.encoding&&(t=e.encoding));try{const e=a.parse(r.readFileSync(n,{encoding:t}));return Object.keys(e).forEach((function(n){Object.prototype.hasOwnProperty.call(process.env,n)?(!0===u&&(process.env[n]=e[n]),i&&c(!0===u?`"${n}" is already defined in \`process.env\` and WAS overwritten`:`"${n}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[n]=e[n]})),{parsed:e}}catch(e){return i&&c(`Failed to load ${n} ${e.message}`),{error:e}}},parse:function(e){const n={};let t,r=e.toString();for(r=r.replace(/\r\n?/gm,"\n");null!=(t=i.exec(r));){const e=t[1];let r=t[2]||"";r=r.trim();const s=r[0];r=r.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===s&&(r=r.replace(/\\n/g,"\n"),r=r.replace(/\\r/g,"\r")),n[e]=r}return n}};e.exports.config=a.config,e.exports.parse=a.parse,e.exports=a},147:e=>{"use strict";e.exports=require("fs")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")}},n={};function t(r){var s=n[r];if(void 0!==s)return s.exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{"use strict";const e=require("http");t(371);const n=require("crypto");var r=t.n(n);const s=new Uint8Array(256);let o=s.length;function i(){return o>s.length-16&&(r().randomFillSync(s),o=0),s.slice(o,o+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(e){return"string"==typeof e&&c.test(e)},u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).substr(1));const d=function(e,n,t){const r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(let e=0;e<16;++e)n[t+e]=r[e];return n}return function(e,n=0){const t=(u[e[n+0]]+u[e[n+1]]+u[e[n+2]]+u[e[n+3]]+"-"+u[e[n+4]]+u[e[n+5]]+"-"+u[e[n+6]]+u[e[n+7]]+"-"+u[e[n+8]]+u[e[n+9]]+"-"+u[e[n+10]]+u[e[n+11]]+u[e[n+12]]+u[e[n+13]]+u[e[n+14]]+u[e[n+15]]).toLowerCase();if(!a(t))throw TypeError("Stringified UUID is invalid");return t}(r)};var f=function(e,n,t,r){return new(t||(t=Promise))((function(s,o){function i(e){try{a(r.next(e))}catch(e){o(e)}}function c(e){try{a(r.throw(e))}catch(e){o(e)}}function a(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}a((r=r.apply(e,n||[])).next())}))},l=function(e,n,t,r){return new(t||(t=Promise))((function(s,o){function i(e){try{a(r.next(e))}catch(e){o(e)}}function c(e){try{a(r.throw(e))}catch(e){o(e)}}function a(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}a((r=r.apply(e,n||[])).next())}))};const p="Internal Server Error",g="Request Body Does Not Contain Required Fields",v="UserId Is Invalid (not uuid)",y="UserId Is Not Found",h=(e,n,t)=>{e.writeHead(n,{"Content-Type":"application/json"}),e.end(t)},O=new class{constructor(){this.users=[]}getUsers(){return f(this,void 0,void 0,(function*(){return this.users}))}findUser(e){return f(this,void 0,void 0,(function*(){return this.users.find((n=>n.id===e))||{username:"",age:0,hobbies:[]}}))}createUser(e){return f(this,void 0,void 0,(function*(){const n=JSON.parse(JSON.stringify(e));return n.id=this.createId(),this.users.push(n),n}))}updateUser(e){return f(this,void 0,void 0,(function*(){const n=JSON.parse(JSON.stringify(e));return this.users.forEach(((e,t)=>{e.id===n.id&&(this.users[t]=n)})),n}))}createId(){let e="",n=!1;for(;!n;){e=d();let t=!1;this.users.forEach((n=>{n.id===e&&(t=!0)})),t||(n=!0)}return e}},N=Number(process.env.PORT),m=(0,e.createServer)(((e,n)=>{const{method:t,url:r}=e;if(t&&r)if("GET"===t&&"/api/users"===r)((e,n)=>{l(void 0,void 0,void 0,(function*(){let t,r="";try{const e=yield n.getUsers();r=JSON.stringify(e),t=200}catch(e){r=JSON.stringify({message:p}),t=500}h(e,t,r)}))})(n,O);else if("GET"===t&&r.match(/\/api\/users\/([0-9a-zA-Z-]+)/)){const e=r.split("/")[3];((e,n,t)=>{l(void 0,void 0,void 0,(function*(){let r="",s=0;try{if(a(t)){const e=yield n.findUser(t);e.id?(r=JSON.stringify(e),s=200):(r=JSON.stringify({message:y}),s=404)}else r=JSON.stringify({message:v}),s=400}catch(e){r=JSON.stringify({message:p}),s=500}h(e,s,r)}))})(n,O,e)}else if("PUT"===t&&r.match(/\/api\/users\/([0-9a-zA-Z-]+)/)){const t=r.split("/")[3];((e,n,t,r)=>{l(void 0,void 0,void 0,(function*(){let s="",o=0;try{let i="";e.on("data",(e=>i+=e.toString())),e.on("end",(()=>l(void 0,void 0,void 0,(function*(){if(i){const{username:e,age:c,hobbies:u}=JSON.parse(i);if(e&&c&&u&&"string"==typeof e&&"number"==typeof c&&Array.isArray(u)){const n={username:e,age:c,hobbies:u,id:r};if(a(r))if((yield t.findUser(r)).id){const e=yield t.updateUser(n);s=JSON.stringify(e),o=200}else s=JSON.stringify({message:y}),o=404;else s=JSON.stringify({message:v}),o=400}else s=JSON.stringify({message:g}),o=400;h(n,o,s)}}))))}catch(e){s=JSON.stringify({message:p}),o=500,h(n,o,s)}}))})(e,n,O,t)}else if("POST"===t&&"/api/users"===r)((e,n,t)=>{l(void 0,void 0,void 0,(function*(){let r,s="";try{let o="";e.on("data",(e=>o+=e.toString())),e.on("end",(()=>l(void 0,void 0,void 0,(function*(){if(o){const{username:e,age:i,hobbies:c}=JSON.parse(o);if(e&&i&&c&&"string"==typeof e&&"number"==typeof i&&Array.isArray(c)){const n={username:e,age:i,hobbies:c},o=yield t.createUser(n);s=JSON.stringify(o),r=201}else s=JSON.stringify({message:g}),r=400;h(n,r,s)}}))))}catch(e){s=JSON.stringify({message:p}),r=500,h(n,r,s)}}))})(e,n,O);else{const e=JSON.stringify({message:"Route Not Found"}),t=404;n.writeHead(t,{"Content-Type":"application/json"}),n.end(e)}}));m.listen(N,"localhost",(()=>{console.log(`Сервер запущен на порту ${N}`)}))})()})();