(()=>{var e={371:(e,t,n)=>{n(738).config(Object.assign({},n(547),n(962)(process.argv)))},962:e=>{const t=/^dotenv_config_(encoding|path|debug|override)=(.+)$/;e.exports=function(e){return e.reduce((function(e,n){const s=n.match(t);return s&&(e[s[1]]=s[2]),e}),{})}},547:e=>{const t={};null!=process.env.DOTENV_CONFIG_ENCODING&&(t.encoding=process.env.DOTENV_CONFIG_ENCODING),null!=process.env.DOTENV_CONFIG_PATH&&(t.path=process.env.DOTENV_CONFIG_PATH),null!=process.env.DOTENV_CONFIG_DEBUG&&(t.debug=process.env.DOTENV_CONFIG_DEBUG),null!=process.env.DOTENV_CONFIG_OVERRIDE&&(t.override=process.env.DOTENV_CONFIG_OVERRIDE),e.exports=t},738:(e,t,n)=>{const s=n(147),r=n(17),i=n(37),o=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function c(e){console.log(`[dotenv][DEBUG] ${e}`)}const a={config:function(e){let t=r.resolve(process.cwd(),".env"),n="utf8";const o=Boolean(e&&e.debug),u=Boolean(e&&e.override);var d;e&&(null!=e.path&&(t="~"===(d=e.path)[0]?r.join(i.homedir(),d.slice(1)):d),null!=e.encoding&&(n=e.encoding));try{const e=a.parse(s.readFileSync(t,{encoding:n}));return Object.keys(e).forEach((function(t){Object.prototype.hasOwnProperty.call(process.env,t)?(!0===u&&(process.env[t]=e[t]),o&&c(!0===u?`"${t}" is already defined in \`process.env\` and WAS overwritten`:`"${t}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[t]=e[t]})),{parsed:e}}catch(e){return o&&c(`Failed to load ${t} ${e.message}`),{error:e}}},parse:function(e){const t={};let n,s=e.toString();for(s=s.replace(/\r\n?/gm,"\n");null!=(n=o.exec(s));){const e=n[1];let s=n[2]||"";s=s.trim();const r=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===r&&(s=s.replace(/\\n/g,"\n"),s=s.replace(/\\r/g,"\r")),t[e]=s}return t}};e.exports.config=a.config,e.exports.parse=a.parse,e.exports=a},147:e=>{"use strict";e.exports=require("fs")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=require("http");n(371);const t=require("crypto");var s=n.n(t);const r=new Uint8Array(256);let i=r.length;function o(){return i>r.length-16&&(s().randomFillSync(r),i=0),r.slice(i,i+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(e){return"string"==typeof e&&c.test(e)},u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).substr(1));const d=function(e,t,n){const s=(e=e||{}).random||(e.rng||o)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return function(e,t=0){const n=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!a(n))throw TypeError("Stringified UUID is invalid");return n}(s)};var f=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{a(s.next(e))}catch(e){i(e)}}function c(e){try{a(s.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}a((s=s.apply(e,t||[])).next())}))},l=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{a(s.next(e))}catch(e){i(e)}}function c(e){try{a(s.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}a((s=s.apply(e,t||[])).next())}))};const p="Internal Server Error",g="Request Body Does Not Contain Required Fields",v="UserId Is Invalid (not uuid)",y="UserId Is Not Found",h=(e,t,n)=>{e.writeHead(t,{"Content-Type":"application/json"}),e.end(n)},O=new class{constructor(){this.users=[]}getUsers(){return f(this,void 0,void 0,(function*(){return this.users}))}findUser(e){return f(this,void 0,void 0,(function*(){return this.users.find((t=>t.id===e))||{username:"",age:0,hobbies:[]}}))}createUser(e){return f(this,void 0,void 0,(function*(){const t=JSON.parse(JSON.stringify(e));return t.id=this.createId(),this.users.push(t),t}))}updateUser(e){return f(this,void 0,void 0,(function*(){const t=JSON.parse(JSON.stringify(e));return this.users.forEach(((e,n)=>{e.id===t.id&&(this.users[n]=t)})),t}))}deleteUser(e){return f(this,void 0,void 0,(function*(){let t=null;this.users.forEach(((n,s)=>{n.id===e.id&&(t=s)})),t&&this.users.splice(t,1)}))}createId(){let e="",t=!1;for(;!t;){e=d();let n=!1;this.users.forEach((t=>{t.id===e&&(n=!0)})),n||(t=!0)}return e}},N=Number(process.env.PORT),m=(0,e.createServer)(((e,t)=>{const{method:n,url:s}=e;if(n&&s)if("GET"===n&&"/api/users"===s)((e,t)=>{l(void 0,void 0,void 0,(function*(){let n,s="";try{const e=yield t.getUsers();s=JSON.stringify(e),n=200}catch(e){s=JSON.stringify({message:p}),n=500}h(e,n,s)}))})(t,O);else if("GET"===n&&s.match(/\/api\/users\/([0-9a-zA-Z-]+)/)){const e=s.split("/")[3];((e,t,n)=>{l(void 0,void 0,void 0,(function*(){let s="",r=0;try{if(a(n)){const e=yield t.findUser(n);e.id?(s=JSON.stringify(e),r=200):(s=JSON.stringify({message:y}),r=404)}else s=JSON.stringify({message:v}),r=400}catch(e){s=JSON.stringify({message:p}),r=500}h(e,r,s)}))})(t,O,e)}else if("PUT"===n&&s.match(/\/api\/users\/([0-9a-zA-Z-]+)/)){const n=s.split("/")[3];((e,t,n,s)=>{l(void 0,void 0,void 0,(function*(){let r="",i=0;try{let o="";e.on("data",(e=>o+=e.toString())),e.on("end",(()=>l(void 0,void 0,void 0,(function*(){if(o){const{username:e,age:c,hobbies:u}=JSON.parse(o);if(e&&c&&u&&"string"==typeof e&&"number"==typeof c&&Array.isArray(u)){const t={username:e,age:c,hobbies:u,id:s};if(a(s))if((yield n.findUser(s)).id){const e=yield n.updateUser(t);r=JSON.stringify(e),i=200}else r=JSON.stringify({message:y}),i=404;else r=JSON.stringify({message:v}),i=400}else r=JSON.stringify({message:g}),i=400;h(t,i,r)}}))))}catch(e){r=JSON.stringify({message:p}),i=500,h(t,i,r)}}))})(e,t,O,n)}else if("DELETE"===n&&s.match(/\/api\/users\/([0-9a-zA-Z-]+)/)){const e=s.split("/")[3];((e,t,n,s)=>{l(void 0,void 0,void 0,(function*(){let e="",r=0;try{if(a(s)){const t=yield n.findUser(s);t.id?(yield n.deleteUser(t),e=JSON.stringify(""),r=204):(e=JSON.stringify({message:y}),r=404)}else e=JSON.stringify({message:v}),r=400}catch(t){e=JSON.stringify({message:p}),r=500}h(t,r,e)}))})(0,t,O,e)}else if("POST"===n&&"/api/users"===s)((e,t,n)=>{l(void 0,void 0,void 0,(function*(){let s,r="";try{let i="";e.on("data",(e=>i+=e.toString())),e.on("end",(()=>l(void 0,void 0,void 0,(function*(){if(i){const{username:e,age:o,hobbies:c}=JSON.parse(i);if(e&&o&&c&&"string"==typeof e&&"number"==typeof o&&Array.isArray(c)){const t={username:e,age:o,hobbies:c},i=yield n.createUser(t);r=JSON.stringify(i),s=201}else r=JSON.stringify({message:g}),s=400;h(t,s,r)}}))))}catch(e){r=JSON.stringify({message:p}),s=500,h(t,s,r)}}))})(e,t,O);else{const e=JSON.stringify({message:"Route Not Found"}),n=404;t.writeHead(n,{"Content-Type":"application/json"}),t.end(e)}}));m.listen(N,"localhost",(()=>{console.log(`Сервер запущен на порту ${N}`)}))})()})();